<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>attachment</title>

<link rel="stylesheet" href="../../../style.css" type="text/css" />
<link rel="stylesheet" href="../../../local.css" type="text/css" />



</head>
<body>

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">

<a href="./../../../">wiki</a>/ 

<a href="./../../">ikiwiki</a>/ 

<a href="./../">pagespec</a>/ 

</span>
<span class="title">
attachment
</span>
</span><!--.header-->

</div>


</div> <!-- .pageheader -->



<div id="content">
<p>[[!meta robots="noindex, follow"]]
This wiki has attachments <strong>disabled</strong>.</p>

<p>If attachments are enabled, the wiki admin can control what types of
attachments will be accepted, by entering a <a href="./../">PageSpec</a> in the
"Allowed Attachments" field of their preferences page.</p>

<p>For example, to limit arbitrary files to 50 kilobytes, but allow
larger mp3 files to be uploaded by joey into a specific directory, and
check all attachments for virii, something like this could be used:</p>

<pre><code>virusfree() and ((user(joey) and podcast/*.mp3 and mimetype(audio/mpeg) and maxsize(15mb)) or (!ispage() and maxsize(50kb)))
</code></pre>

<p>The regular <a href="./../">PageSpec</a> syntax is expanded with thw following
additional tests:</p>

<ul>
<li><p>maxsize(size)</p>

<p>Tests whether the attachment is no larger than the specified size.
The size defaults to being in bytes, but "kb", "mb", "gb" etc can be
used to specify the units.</p></li>
<li><p>minsize(size)</p>

<p>Tests whether the attachment is no smaller than the specified size.</p></li>
<li><p>ispage()</p>

<p>Tests whether the attachment will be treated by ikiwiki as a wiki page.
(Ie, if it has an extension of ".mdwn", or of any other enabled page
format).</p>

<p>So, if you don't want to allow wiki pages to be uploaded as attachments,
use <code>!ispage()</code> ; if you only want to allow wiki pages to be uploaded
as attachments, use <code>ispage()</code>.</p></li>
<li><p>user(username)</p>

<p>Tests whether the attachment is being uploaded by a user with the
specified username. If openid is enabled, an openid can also be put here.</p></li>
<li><p>ip(address)</p>

<p>Tests whether the attacment is being uploaded from the specified IP
address.</p></li>
<li><p>mimetype(foo/bar)</p>

<p>This checks the MIME type of the attachment. You can include a glob
in the type, for example <code>mimetype(image/*)</code>.</p></li>
<li><p>virusfree()</p>

<p>Checks the attachment with an antiviral program.</p></li>
</ul>

</div>

<div id="footer" class="pagefooter">
<div id="pageinfo">









<div class="pagedate">
Last edited Mon 04 Aug 2008 06:43:27 PM CEST
<!-- Created Mon 04 Aug 2008 06:43:27 PM CEST -->
</div>

</div><!-- #pageinfo -->

<!-- from wiki -->
</div><!-- .pagefooter #footer -->

</body>
</html>
